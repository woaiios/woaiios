# Word Discoverer - Web Version

一个基于网页的英语词汇学习工具，集成 ECDICT 76万+ 词条数据库，帮助您发现和掌握新单词。

## ⚠️ 重要：首次使用需要下载数据库

本项目使用 ECDICT 英汉词典数据库，需要手动下载数据库文件：

1. 查看 [DOWNLOAD_DATABASE.md](DOWNLOAD_DATABASE.md) 获取详细下载说明
2. 下载 `stardict.7z` 并解压得到 `stardict.db`
3. 将 `stardict.db` 放到 `public` 目录下
4. 运行 `npm install` 和 `npm run dev`

## 功能特性

### 🎯 核心功能
- **智能词汇分析** - 自动识别文本中的生词和难词
- **多级难度设置** - 基于 BNC 词频、柯林斯星级、考试大纲的科学分级
- **实时高亮显示** - 根据难度级别高亮显示不同颜色的单词
- **丰富词典信息** - 音标、中英释义、词形变化、考试标签、词频等
- **词汇管理** - 个人生词本，支持添加、删除、查看
- **🎤 发音练习** - 使用智能算法检测用户发音，提供评分和改进建议

### 📚 ECDICT 数据库特性
- **76万+ 词条** - 涵盖从基础到专业的海量词汇
- **柯林斯星级** - 1-5星评级系统标注词汇重要性
- **牛津3000核心** - 标注牛津3000核心词汇
- **考试标签** - 中考、高考、CET-4/6、雅思、托福、GRE等
- **双语释义** - 完整的英文定义和中文翻译
- **词形变化** - 包含过去式、过去分词、现在分词、复数等
- **词频数据** - BNC（英国国家语料库）和现代语料库词频

### 🔧 高级功能
- **离线支持** - 使用 Service Worker 技术，支持完全离线使用
- **PWA 支持** - 可安装为独立应用，获得原生应用般的体验
- **智能缓存** - 自动缓存静态资源和数据库文件，首次访问后即可离线使用
- **导入导出** - 支持词汇本和设置的导入导出
- **自定义配置** - 可调整高亮颜色、透明度等
- **统计信息** - 显示文本分析统计和难度评分
- **本地存储** - 数据保存在浏览器本地，保护隐私

### 🎨 用户体验
- **离线模式指示** - 断网时自动显示离线提示，无缝切换
- **网络状态监控** - 实时监控网络连接状态，自动提示用户
- **响应式设计** - 支持桌面和移动设备
- **现代化界面** - 简洁美观的用户界面
- **实时反馈** - 操作即时反馈和通知
- **数据持久化** - 自动保存用户数据

## 使用方法

### 1. 文本分析
1. 在文本输入框中粘贴或输入英文文本
2. 选择难度级别（初学者/中级/高级/专家）
3. 选择高亮模式（仅生词/难词/全部单词）
4. 点击"分析文本"按钮

### 2. 词汇学习
1. 悬停在黄色高亮的单词上查看翻译
2. 点击单词添加到个人词汇本
3. 在词汇本中管理已保存的单词

### 3. 发音练习
1. 点击"Pronunciation"按钮打开发音练习界面
2. 从示例句子库中选择练习句子，或输入自定义句子
3. 点击"Start Recording"开始录音并朗读句子
4. 系统自动识别发音并给出评分（0-100分）
5. 查看详细反馈和改进建议
6. 查看练习历史记录，追踪进步

### 4. 设置管理
1. 点击"设置"按钮打开配置面板
2. 调整高亮颜色和透明度
3. 选择翻译服务和目标语言
4. 导出/导入设置进行备份

### 5. 数据管理
1. 在词汇本中导出数据为JSON文件
2. 导入之前导出的词汇数据
3. 清空词汇本重新开始

## 发音练习功能详解

### 🎤 功能概述
发音练习功能使用浏览器原生的 Web Speech API 和机器学习算法，帮助用户提高英语发音水平。

### 📋 主要特性

1. **智能语音识别**
   - 使用 Web Speech API 实时录制和识别用户语音
   - 自动转换语音为文本进行对比分析
   - 支持英语（美式发音）识别

2. **准确度评分系统**
   - **Levenshtein 距离算法**：计算识别文本与目标文本的字符相似度
   - **单词匹配算法**：逐词对比，综合考虑单词匹配率、顺序匹配度和长度相似度
     - 50% 基础匹配率（有多少目标单词被正确识别）
     - 30% 顺序匹配度（单词顺序是否正确）
     - 20% 长度相似度（识别单词数量是否接近目标）
   - **综合评分**：60% 单词匹配分数 + 40% 字符相似度分数
   - **分数范围**：0-100分

3. **四级反馈等级**
   - 🌟 **Excellent (90-100分)**：发音非常准确
   - 👍 **Good (75-89分)**：发音清晰，略有瑕疵
   - 😊 **Fair (60-74分)**：发音尚可，需要改进
   - 💪 **Needs Improvement (<60分)**：需要更多练习

4. **智能反馈建议**
   - 自动识别缺失的单词
   - 标注多余识别的单词
   - 提供针对性的改进建议
   - 鼓励性的反馈信息

5. **练习管理**
   - 10个精选示例句子
   - 支持自定义句子输入
   - 保存最近10次练习历史
   - 追踪学习进度

### 🔧 技术实现

- **语音识别**：Web Speech API (SpeechRecognition)
- **算法**：Levenshtein 编辑距离算法、单词匹配算法（非机器学习）
- **评分模型**：基于文本相似度的智能评分系统
- **无需服务器**：完全在浏览器端运行，保护隐私

### ⚠️ 使用要求

- 需要麦克风权限
- 支持的浏览器：Chrome 60+, Edge 79+, Safari 14.1+
- 需要网络连接（语音识别需要在线服务）

## 技术特性

- **ECDICT 数据库** - 集成 76万+ 词条的专业英汉词典
- **SQLite + sql.js** - 在浏览器中高效查询大型数据库
- **Web Speech API** - 浏览器原生语音识别，实现发音检测
- **文本相似度算法** - Levenshtein 距离算法和单词匹配算法评估发音准确度
- **Service Worker** - 提供离线支持和智能缓存管理
- **PWA (Progressive Web App)** - 可安装为独立应用，支持离线使用
- **纯前端实现** - 无需服务器，完全在浏览器中运行
- **本地存储** - 使用localStorage保存用户数据
- **响应式设计** - 适配各种屏幕尺寸
- **现代JavaScript** - 使用ES6+语法和现代Web API
- **模块化架构** - 采用ES6模块化开发，代码结构清晰
- **现代构建工具** - 使用Vite进行快速开发和优化打包

## 离线功能说明

### 📱 离线使用能力
本应用支持完全离线使用，即使在断网的情况下也能正常工作：

1. **首次访问**：应用会自动下载并缓存所有必需的资源
   - 静态资源（HTML、CSS、JavaScript）
   - 数据库文件（词典数据）
   - 外部资源（字体、图标）

2. **离线模式**：断网后，应用将：
   - 自动从缓存加载资源
   - 显示离线状态提示条
   - 所有核心功能保持可用（文本分析、词汇查询、生词本管理等）

3. **网络恢复**：重新连接网络后：
   - 自动检测网络状态
   - 显示在线提示
   - 后台更新缓存（如有新版本）

### 🔄 缓存策略
- **静态资源**：Cache First - 优先使用缓存，加载速度更快
- **数据库文件**：Cache First - 离线可用
- **HTML页面**：Network First - 确保获取最新内容，失败时使用缓存

### 💡 注意事项
- **发音练习功能**需要网络连接（使用在线语音识别服务）
- **Google Drive 同步**需要网络连接
- 其他所有功能均可离线使用

## 开发与构建

### 环境要求

- Node.js 18+
- npm 或 yarn
- ECDICT 数据库文件（需手动下载，见 [DOWNLOAD_DATABASE.md](DOWNLOAD_DATABASE.md)）

### 安装步骤

1. **克隆项目**
```bash
git clone <your-repo-url>
cd woaiios
```

2. **安装依赖**
```bash
npm install
```

3. **下载数据库**

按照 [DOWNLOAD_DATABASE.md](DOWNLOAD_DATABASE.md) 中的说明下载并配置 `stardict.db`

4. **启动开发服务器**
```bash
npm run dev
```

开发服务器将在 `http://localhost:3000` 启动

### 生产构建

构建优化后的生产版本：
```bash
npm run build
```

构建结果将输出到 `dist/` 目录，包含：
- 优化和压缩的JavaScript和CSS
- 所有必需的静态资源（字典文件、资源目录等）
- 可直接部署的纯前端网页

### 预览构建
预览生产构建版本：
```bash
npm run preview
```

## 部署说明

### GitHub Pages部署
1. 构建生产版本：`npm run build`
2. 将 `dist/` 目录的内容推送到 `gh-pages` 分支
3. 在仓库设置中启用GitHub Pages，选择 `gh-pages` 分支
4. 访问 `https://yourusername.github.io/repository-name/`

### 静态网站托管
生产构建后的 `dist/` 目录包含完整的静态网站，可以直接部署到：
- Vercel
- Netlify
- GitHub Pages
- 任何静态网站托管服务

只需上传 `dist/` 目录中的所有文件即可。

### 本地运行（开发环境）
1. 克隆或下载代码
2. 安装依赖：`npm install`
3. 启动开发服务器：`npm run dev`
4. 访问 `http://localhost:3000`

## 浏览器支持

### 基本功能
- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

### 离线功能 (Service Worker)
离线功能需要浏览器支持 Service Worker：
- ✅ Chrome 45+ (推荐)
- ✅ Edge 17+
- ✅ Firefox 44+
- ✅ Safari 11.1+

### 发音检查功能
发音检查功能需要浏览器支持 Web Speech API：
- ✅ Chrome 60+ (推荐)
- ✅ Edge 79+ (推荐)
- ✅ Safari 14.1+ (macOS/iOS)
- ❌ Firefox (暂不支持 Web Speech API)

## 更新日志

### v2.1.0 (当前版本)

- 📴 **新增离线支持**：使用 Service Worker 实现完全离线使用能力
- 📱 **PWA 支持**：可作为独立应用安装，获得原生应用体验
- 🔄 **智能缓存管理**：自动缓存静态资源和数据库文件
- 🌐 **网络状态监控**：实时显示在线/离线状态
- 🎤 **新增发音练习功能**：使用 Web Speech API 实现语音识别和发音检测
- 🤖 **智能评分系统**：基于 Levenshtein 距离和单词匹配算法评估发音准确度
- 📊 **详细反馈**：提供分数、改进建议和练习历史记录
- 📚 **示例句子库**：内置10个常用练习句子，支持自定义句子输入
- 🎯 **四级评分**：excellent (90+), good (75-89), fair (60-74), needs-improvement (<60)

### v2.0.0

- 🎉 **重大更新**：集成 ECDICT 76万+ 词条数据库
- 🗃️ 使用 SQLite + sql.js 实现浏览器端数据库查询
- 📚 新增音标、柯林斯星级、牛津3000标注
- 🏷️ 新增考试标签（中考、高考、CET-4/6、雅思、托福等）
- 📊 新增词频数据（BNC 和现代语料库）
- 🔄 新增完整的词形变化信息
- 🎨 全新的词条展示界面
- ⚡ 优化难度分级算法，更加科学准确

### v1.1.0

- ✨ 添加现代构建工具 Vite
- ✨ 添加 npm 脚本支持开发、构建、预览
- 🔧 优化开发流程，支持热更新
- 📦 优化生产构建，输出纯前端网页
- 📝 更新文档，添加完整的开发和部署说明

### v1.0.0

- 初始版本发布
- 实现核心词汇分析功能
- 添加词汇本管理
- 支持设置自定义
- 实现导入导出功能

## 致谢

本项目使用 [ECDICT](https://github.com/skywind3000/ECDICT) 数据库，感谢 skywind3000 提供的优秀开源词典资源。

ECDICT 项目地址：<https://github.com/skywind3000/ECDICT>

License: MIT

## 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件
## 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 致谢

灵感来源于 [Word Discoverer Chrome Extension](https://github.com/Leon406/word-discoverer-ng)
